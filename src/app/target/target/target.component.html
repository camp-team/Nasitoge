<div class="container" *ngIf="target$ | async as target">
  <mat-card class="target-card">
    <mat-card-header class="target-card__header">
      <div mat-card-avatar class="target-card__avatar"></div>
      <mat-card-title>{{ target.author.name }} さん</mat-card-title>
      <mat-card-subtitle class="target-card__date">
        {{
          target.createdAt.toDate() | date: 'yyyy/MM/dd'
        }}から</mat-card-subtitle
      >
      <mat-card-subtitle>
        {{ target.targetDate.toDate() | date: 'yyyy/MM/dd' }} まで
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <p class="target-card__main">
        {{ target.target }}
      </p>
    </mat-card-content>
    <div class="target-card__icon">
      <button mat-icon-button>
        <mat-icon>edit</mat-icon>
      </button>
      <button mat-icon-button (click)="deleteTarget(target.targetId)">
        <mat-icon>delete</mat-icon>
      </button>
    </div>
  </mat-card>

  <mat-accordion>
    <mat-expansion-panel
      class="task-form"
      (opened)="panelOpenState = true"
      (closed)="panelOpenState = false"
    >
      <mat-expansion-panel-header class="task-panel">
        <mat-panel-title>
          達成するために何をしますか？
        </mat-panel-title>
      </mat-expansion-panel-header>
      <app-task [targetId]="target.targetId"></app-task>
    </mat-expansion-panel>
  </mat-accordion>
  <app-memo [targetId]="target.targetId"></app-memo>
  <div class="to-index">
    <a routerLink="/index" button mat-stroked-button>
      一覧に戻る
    </a>
  </div>
</div>
